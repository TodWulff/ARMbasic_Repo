#ifndef ABRTOS_SCHEDULER_SUPPORT
#define ABRTOS_SCHEDULER_SUPPORT

#define ABRTOS_MOD		ABRTOS_LOG_MOD_SCHED

#define	ABRTOS_SCHED_ITERATE_START			0
#define	ABRTOS_SCHED_ITERATE_FINISH			1
#define	ABRTOS_SCHED_START_START			2
#define	ABRTOS_SCHED_START_FINISH			3
#define	ABRTOS_SCHED_STOP_START				4
#define	ABRTOS_SCHED_STOP_FINISH			5
#define	ABRTOS_SCHED_ITERATED				6

SUB ABRTOS_SCHED_ITERATE
		
	#if ABRTOS_OPTION_USE_LOGGING == 1
		' ABRTOS_LOG_EVENT(ABRTOS_MOD,ABRTOS_SCHED_ITERATE_START)
	#endif
	
	' PRINT "TICK"
		
	#if ABRTOS_OPTION_USE_LOGGING == 1
		' ABRTOS_LOG_EVENT(ABRTOS_MOD,ABRTOS_SCHED_ITERATED)
	#endif
		
	' #if ABRTOS_OPTION_USE_LOGGING == 1
		' ABRTOS_LOG_EVENT(ABRTOS_MOD,ABRTOS_SCHED_ITERATE_FINISH)
	' #endif
	
ENDSUB

SUB	ABRTOS_SCHED_START
		
	#if ABRTOS_OPTION_USE_LOGGING == 1
		ABRTOS_LOG_EVENT(ABRTOS_MOD,ABRTOS_SCHED_START_START)
	#endif
	
	#if ABRTOS_OPTION_USE_WDT == 1
		ABRTOS_WDT_START
	#endif
	
	' ABRTOS_CREATE_SCHEDULER_TASK
	
	ON TIMER ABRTOS_TIME_SLICE ABRTOS_SCHED_ITERATE
		
	#if ABRTOS_OPTION_USE_LOGGING == 1
		ABRTOS_LOG_EVENT(ABRTOS_MOD,ABRTOS_SCHED_START_FINISH)
	#endif
		
ENDSUB

SUB ABRTOS_SCHED_STOP
		
	#if ABRTOS_OPTION_USE_LOGGING == 1
		ABRTOS_LOG_EVENT(ABRTOS_MOD,ABRTOS_SCHED_STOP_START)
	#endif
	
	TIMER_INT_OFF
	' WDT CAN NOT BE STOPPED ONCE FED, SO SHOULD SET IT TO AS LONG AS ALLOWED
	' AND ANNUNCIATE SAME, SOMEHOW
		
	#if ABRTOS_OPTION_USE_LOGGING == 1
		ABRTOS_LOG_EVENT(ABRTOS_MOD,ABRTOS_SCHED_STOP_FINISH)
	#endif
		
ENDSUB

#endif
